{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Natasha Jha\\\\Downloads\\\\GDrive-Party-master\\\\src\\\\components\\\\VideoPlayer.js\";\nimport React from \"react\";\nimport ReactPlayer from \"react-player\";\nimport Container from \"react-bootstrap/cjs/Container\";\nimport Row from \"react-bootstrap/cjs/Row\";\nimport VideoQueue from \"./VideoQueue\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nclass VideoPlayer extends React.Component {\n  constructor(props) {\n    console.log(\"VIDEOOOOO\");\n    super(props);\n    this.onProgress = this.onProgress.bind(this);\n    this.onPause = this.onPause.bind(this);\n    this.onPlay = this.onPlay.bind(this);\n    this.onSeek = this.onSeek.bind(this);\n    this.onReady = this.onReady.bind(this);\n    let url = \"\";\n    if (props.url == \"\") {\n      url = 'https://www.youtube.com/watch?v=QZw-rgaQVfI';\n    } else {\n      url = props.url;\n    }\n    console.log(url);\n    this.ref = React.createRef();\n    this.state = {\n      'duration': 0.0,\n      \"database\": props.database,\n      'url': url,\n      'is_join': props.is_join || false,\n      'playing': true\n    };\n    console.log(`is_join ${this.state.is_join}`);\n    setTimeout(() => {\n      this.state.database.state.ref.onSnapshot(doc => {\n        console.log(doc.data());\n        if (doc.data() != undefined) {\n          this.setState({\n            'url': doc.data()['url'],\n            'playing': doc.data()['mode'] == 'play'\n          });\n        }\n      });\n    }, 2000);\n  }\n  onReady() {\n    console.log(\"Player is ready to play...\");\n    if (this.state.is_join) {\n      console.log('Initiating join');\n      this.state.database.state.ref.onSnapshot(doc => {\n        let data = doc.data();\n        if (Math.abs(data['time'] - this.state.duration) >= 4.0) {\n          this.ref.current.seekTo(data['time'], 'seconds');\n        }\n      });\n    }\n  }\n  onPlay() {\n    //console.log(this.state.database)\n    console.log(\"User has pressed play...\");\n    if (!this.state.is_join) {\n      this.state.database.togglePlay(\"play\");\n    }\n  }\n  onPause() {\n    console.log(\"User has paused the video\");\n    //console.log(this.state.database)\n    if (!this.state.is_join) {\n      this.state.database.togglePlay(\"pause\");\n    }\n  }\n  onSeek() {\n    console.log('onSeek');\n    ///console.log(`User has seeked to ${sec}`);\n    //this.state.database.setSeek(sec);\n  }\n  onBuffer() {\n    console.log(\"User is buffering...\");\n  }\n  onProgress(dur) {\n    //if(Math.abs(this.state.duration - dur['playedSeconds']) >= 5.0) {\n    this.state.duration = dur['playedSeconds'];\n    if (!this.state.is_join) {\n      this.state.database.setSeek(dur['playedSeconds']);\n    }\n\n    //}\n    console.log(this.state.duration);\n  }\n  render() {\n    console.log(`Rendering video with url ${this.state.url}`);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ReactPlayer, {\n      ref: this.ref,\n      url: this.state.url,\n      controls: !this.state.is_join // Only host can control\n      ,\n      light: false,\n      onPlay: this.onPlay,\n      onPause: this.onPause,\n      onBuffer: this.onBuffer,\n      onSeek: this.onSeek,\n      onReady: this.onReady,\n      onProgress: this.onProgress,\n      playing: this.state.playing,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(VideoQueue, {\n      changeVideo: vid => {\n        this.state.database.setURL(vid);\n        //this.setState({\"url\":vid})\n      },\n      database: this.state.database,\n      is_join: this.state.is_join,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 25\n      }\n    }))));\n  }\n}\nexport default VideoPlayer;","map":{"version":3,"names":["React","ReactPlayer","Container","Row","VideoQueue","VideoPlayer","Component","constructor","props","console","log","onProgress","bind","onPause","onPlay","onSeek","onReady","url","ref","createRef","state","database","is_join","setTimeout","onSnapshot","doc","data","undefined","setState","Math","abs","duration","current","seekTo","togglePlay","onBuffer","dur","setSeek","render","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","fluid","controls","light","playing","changeVideo","vid","setURL"],"sources":["C:/Users/Natasha Jha/Downloads/GDrive-Party-master/src/components/VideoPlayer.js"],"sourcesContent":["import React from \"react\";\nimport ReactPlayer from \"react-player\";\nimport Container from \"react-bootstrap/cjs/Container\";\nimport Row from \"react-bootstrap/cjs/Row\";\nimport VideoQueue from \"./VideoQueue\";\n\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n\nclass VideoPlayer extends React.Component {\n    constructor(props) {\n        console.log(\"VIDEOOOOO\")\n        super(props);\n        this.onProgress= this.onProgress.bind(this);\n        this.onPause= this.onPause.bind(this);\n        this.onPlay = this.onPlay.bind(this);\n        this.onSeek = this.onSeek.bind(this);\n        this.onReady = this.onReady.bind(this);\n\n        let url = \"\";\n        if (props.url == \"\"){\n            url ='https://www.youtube.com/watch?v=QZw-rgaQVfI';\n        } else {\n            url = props.url;\n        }\n\n        console.log(url);\n\n\n\n        this.ref = React.createRef();\n        this.state = {\n            'duration': 0.0,\n            \"database\": props.database,\n            'url': url ,\n            'is_join': props.is_join || false,\n            'playing':true,\n        };\n\n        console.log(`is_join ${this.state.is_join}`)\n\n        setTimeout(()=>{\n            this.state.database.state.ref.onSnapshot(doc=>{\n                console.log(doc.data());\n                if(doc.data() != undefined) {\n                    this.setState({'url': doc.data()['url'], 'playing': doc.data()['mode'] == 'play'})\n                }\n\n            });\n\n        },2000);\n\n\n    }\n\n\n    onReady(){\n        console.log(\"Player is ready to play...\");\n        if(this.state.is_join){\n            console.log('Initiating join')\n            this.state.database.state.ref.onSnapshot(doc => {\n                let data = doc.data();\n                if(Math.abs(data['time'] - this.state.duration) >= 4.0) {\n                    this.ref.current.seekTo(data['time'], 'seconds');\n                }\n            })\n\n        }\n    }\n\n    onPlay(){\n        //console.log(this.state.database)\n        console.log(\"User has pressed play...\");\n        if(!this.state.is_join) {\n            this.state.database.togglePlay(\"play\");\n        }\n    }\n\n    onPause(){\n        console.log(\"User has paused the video\")\n        //console.log(this.state.database)\n        if(!this.state.is_join) {\n            this.state.database.togglePlay(\"pause\");\n        }\n    }\n\n    onSeek(){\n        console.log('onSeek')\n        ///console.log(`User has seeked to ${sec}`);\n        //this.state.database.setSeek(sec);\n    }\n\n    onBuffer(){\n        console.log(\"User is buffering...\");\n\n    }\n\n    onProgress(dur){\n        //if(Math.abs(this.state.duration - dur['playedSeconds']) >= 5.0) {\n        this.state.duration = dur['playedSeconds'];\n\n        if(!this.state.is_join) {\n            this.state.database.setSeek(dur['playedSeconds']);\n        }\n\n        //}\n        console.log(this.state.duration)\n\n\n    }\n\n\n\n    render() {\n        console.log(`Rendering video with url ${this.state.url}`)\n        return(\n            <div>\n                <Container fluid>\n                    <Row>\n                    <ReactPlayer\n                        ref={this.ref}\n                        url={this.state.url}\n                        controls={!this.state.is_join} // Only host can control\n                        light={false}\n                        onPlay={this.onPlay}\n                        onPause={this.onPause}\n                        onBuffer={this.onBuffer}\n                        onSeek={this.onSeek}\n                        onReady={this.onReady}\n                        onProgress={this.onProgress}\n                        playing={this.state.playing}\n                    />\n                    </Row>\n                    <br/>\n                    <Row>\n                        <VideoQueue changeVideo={(vid)=>{\n                            this.state.database.setURL(vid);\n                            //this.setState({\"url\":vid})\n                        }}\n                                    database={this.state.database}\n                                    is_join ={this.state.is_join}\n                        />\n                    </Row>\n\n                </Container>\n            </div>\n        );\n    }\n}\n\nexport default VideoPlayer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}